<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bases de l'électronique</title>
    <link rel="stylesheet" href="site_web_css.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        section {
            margin-bottom: 50px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        input[type="number"] {
            width: 100px;
        }
        button {
            margin-top: 10px;
        }
        /* LED réaliste uniquement verte, sans contour noir */
        .led {
            display: inline-block;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            vertical-align: middle;
            background: #000; /* éteinte */
            box-shadow: inset 0 0 5px #001100; /* léger relief même éteinte */
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>

<header>
    <h1>Bases de l'électronique</h1>
    <nav>
        <ul>
            <li><a href="page_accueil.html">Accueil</a></li>
            <li><a href="#Calculateur-Loi-dOhm">Calculateur</a></li>
            <li><a href="#led-simulator">Simulateurs</a></li>
            <li><a href="#resistance-game">Mini-jeu</a></li>
        </ul>
    </nav>
</header>

<section id="ohm">
    <h2 id="Calculateur-Loi-dOhm">Calculateur Loi d'Ohm</h2>
    <p>Calculez la tension, le courant ou la résistance en entrant deux valeurs :</p>

    <label>Tension (V) : <input type="number" id="voltage" step="0.1"></label><br>
    <label>Courant (A) : <input type="number" id="current" step="0.01"></label><br>
    <label>Résistance (Ω) : <input type ="number" id="resistance" step="0.1" ></label><br>

    <button onclick="calculateOhm()">Calculer</button>
    <p id="ohmResult"></p>
</section>

<script>
const voltage = document.getElementById("voltage");
const current = document.getElementById("current");
const resistance = document.getElementById("resistance");

function checkInputs() {
    const fields = [voltage, current, resistance];
    const filled = fields.filter(f => f.value !== "").length;

    if (filled === 2) {
        fields.forEach(f => {
            if (f.value === "") f.disabled = true;
        });
    } else {
        fields.forEach(f => f.disabled = false);
    }
}

voltage.addEventListener("input", checkInputs);
current.addEventListener("input", checkInputs);
resistance.addEventListener("input", checkInputs);
</script>


<section id="calculateur_led">
    <h2>Calculateur de Résistance pour LED (avec Zener en option)</h2>
    <p>Choisissez un type de LED ou entrez vous-même les valeurs :</p>

    <label>Type de LED :
        <select id="ledType" onchange="updateLedValues()">
            <option value="">-- Choisir un type --</option>
            <option value="red">Rouge</option>
            <option value="yellow">Jaune</option>
            <option value="green">Verte</option>
            <option value="blue">Bleue</option>
            <option value="white">Blanche</option>
            <option value="uv">UV</option>
            <option value="custom">Personnalisé</option>
        </select>
    </label><br>

    <label>Tension de seuil LED (Vf) :
        <input type="number" id="ledVoltage" step="0.01">
    </label><br>

    <label>Courant de la LED (mA) :
        <input type="number" id="ledCurrent" step="0.1">
    </label><br>

    <label>Tension d'alimentation (V) :
        <input type="number" id="supplyVoltage" step="0.1">
    </label><br><br>

    <!-- --- OPTION ZENER --- -->
    <label>
        <input type="checkbox" id="useZener" onchange="toggleZener()"> Utiliser une diode Zener
    </label><br>

    <div id="zenerOptions" style="display:none;">
        <label>Tension Zener (Vz) :
            <input type="number" id="vz" step="0.1">
        </label><br>

        <label>Courant Zener minimal (Iz) en mA :
            <input type="number" id="iz" step="0.1">
        </label><br><br>
    </div>

    <button onclick="calculateLedResistor()">Calculer</button>

    <p id="ledResult"></p>

</section>

<script>
function updateLedValues() {
    const type = document.getElementById("ledType").value;
    const vfInput = document.getElementById("ledVoltage");
    const currentInput = document.getElementById("ledCurrent");

    const ledData = {
        red:    { vf: 1.8, current: 10 },
        yellow: { vf: 2.0, current: 10 },
        green:  { vf: 2.1, current: 10 },
        blue:   { vf: 3.0, current: 15 },
        white:  { vf: 3.2, current: 15 },
        uv:     { vf: 3.3, current: 10 }
    };

    if (type === "custom" || type === "") {
        vfInput.value = "";
        currentInput.value = "";
        return;
    }

    vfInput.value = ledData[type].vf;
    currentInput.value = ledData[type].current;
}

function toggleZener() {
    const zone = document.getElementById("zenerOptions");
    zone.style.display = document.getElementById("useZener").checked ? "block" : "none";
}

function calculateLedResistor() {
    const Vs = parseFloat(document.getElementById("supplyVoltage").value);
    const Vf = parseFloat(document.getElementById("ledVoltage").value);
    const Iled = parseFloat(document.getElementById("ledCurrent").value) / 1000;
    const useZener = document.getElementById("useZener").checked;

    const result = document.getElementById("ledResult");

    if (isNaN(Vs) || isNaN(Vf) || isNaN(Iled) || Iled <= 0) {
        result.textContent = "⚠️ Entrer des valeurs valides.";
        return;
    }

    let Vdrop = Vs - Vf; // chute totale par défaut

    // --- SI ZENER ACTIVÉE ---
    if (useZener) {
        const Vz = parseFloat(document.getElementById("vz").value);
        const Iz = parseFloat(document.getElementById("iz").value) / 1000;

        if (isNaN(Vz) || isNaN(Iz) || Iz <= 0) {
            result.textContent = "⚠️ Entrer une Zener et un courant Iz valides.";
            return;
        }

        if (Vz >= Vs) {
            result.textContent = "⚠️ Vz doit être inférieure à la tension d’alimentation.";
            return;
        }

        // si Zener utilisée : tension stabilisée à Vz
        Vdrop = Vs - Vz;

        // le courant total = Iz + courant LED
        const Itotal = Iz + Iled;
        const Rz = Vdrop / Itotal; // résistance série

        const Pz = Vz * Iz; // puissance dans la Zener
        const Pr = Vdrop * Itotal; // puissance dans la résistance

        result.innerHTML = `
            <strong>Avec diode Zener :</strong><br><br>
            Résistance série : <strong>${Rz.toFixed(1)} Ω</strong><br>
            Puissance dissipée dans la Zener : <strong>${Pz.toFixed(2)} W</strong><br>
            Puissance dissipée dans la résistance : <strong>${Pr.toFixed(2)} W</strong><br>
        `;
        return;
    }

    // ------ MODE NORMAL SANS ZENER ------
    if (Vf >= Vs) {
        result.textContent = "⚠️ Vf doit être inférieure à Vs.";
        return;
    }

    const R = Vdrop / Iled;
    const Rrounded = Math.round(R);

    result.innerHTML = `
        <strong>Sans diode Zener :</strong><br><br>
        Résistance : <strong>${Rrounded} Ω</strong><br>
        Valeur exacte : ${R.toFixed(2)} Ω
    `;
}
</script>




<section id="led-simulator">
    <h2>Simulateur de LED</h2>
    <p>Entrez la tension et la résistance pour voir si la LED s’allume. La LED devient plus brillante en fonction du courant :</p>

    <div style="display:flex; flex-wrap:wrap; gap:20px; background-color:#111; padding:20px; border-radius:8px; justify-content:center; align-items:flex-start;">

        <!-- SVG Circuit -->
        <div style="flex:2; min-width:300px;">
            <svg id="circuitSVG" viewBox="0 0 900 200" width="100%" height="auto">
                <defs>
                    <!-- Motif résistance -->
                    <pattern id="resistorPattern" width="10" height="10" patternUnits="userSpaceOnUse">
                        <rect width="5" height="10" fill="#ccc"/>
                        <rect x="5" width="5" height="10" fill="#888"/>
                    </pattern>
                    <!-- Motif fil -->
                    <pattern id="wirePattern" width="6" height="6" patternUnits="userSpaceOnUse">
                        <path d="M0,3 L6,3" stroke="#ccc" stroke-width="2"/>
                    </pattern>
                </defs>

                <!-- Batterie -->
                <rect x="0.5%" y="33%" width="3%" height="26%" fill="#555" rx="4" ry="4"/>
                <text id="batteryLabel" x="4%" y="45%" fill="#fff" font-size="12" dominant-baseline="middle">Batterie U=5V</text>

                <!-- Fils -->
                <line x1="2%" y1="70%" x2="28%" y2="70%" stroke="url(#wirePattern)" stroke-width="4"/>
                <line x1="32%" y1="70%" x2="57%" y2="70%" stroke="url(#wirePattern)" stroke-width="4"/>
                <line x1="57%" y1="70%" x2="57%" y2="25%" stroke="url(#wirePattern)" stroke-width="4"/>
                <line x1="57%" y1="25%" x2="2%" y2="25%" stroke="url(#wirePattern)" stroke-width="4"/>
                <line x1="2%" y1="60%" x2="2%" y2="70%" stroke="url(#wirePattern)" stroke-width="4"/>
                <line x1="2%" y1="25%" x2="2%" y2="33%" stroke="url(#wirePattern)" stroke-width="4"/>

                <!-- Résistance -->
                <rect x="28%" y="62%" width="4%" height="10%" fill="url(#resistorPattern)" rx="4" ry="4"/>
                <!-- Anneaux dynamiques -->
                <rect x="28%" y="62%" width="8%" height="15%" fill="url(#resistorPattern)" rx="4" ry="4"/>
                <rect id="ring1" x="28.5%" y="62%" width="1.2%" height="15%"/>
                <rect id="ring2" x="30%" y="62%" width="1.2%" height="15%"/>
                <rect id="ring3" x="31.5%" y="62%" width="1.2%" height="15%"/>
                <rect id="ring4" x="33%" y="62%" width="1.2%" height="15%"/>

                <text id="resistorLabel" x="29%" y="55%" fill="#fff" font-size="12" dominant-baseline="middle">R=100Ω</text>


                <!-- LED -->
                <circle id="led" cx="57%" cy="50%" r="3%" fill="#000" stroke="#090" stroke-width="2"/>
                <text x="60%" y="52%" fill="#fff" font-size="12">LED</text>
            </svg>

            <!-- Inputs -->
            <div style="text-align:left; margin-top:15px; color:#fff;">
                <label>Tension (V): <input type="number" id="inputVoltage" value="5" step="0.1"></label>
                <label>Résistance (Ω): <input type="number" id="inputResistance" value="100" step="1"></label>
                <p id="currentDisplay">Courant: 0 mA</p>
            </div>
        </div>

        <!-- Bloc explications intégré et sombre -->
        <div class="led-info-box">
        <h3>Polarisation de la LED</h3>
        <ul>
            <li><strong>0V ou courant nul :</strong> LED éteinte, pas de conduction.</li>
            <li><strong>Courant faible :</strong> LED faiblement allumée, couleur verte très sombre.</li>
            <li><strong>Courant normal :</strong> LED allumée correctement, vert lumineux.</li>
            <li><strong>Courant élevé :</strong> LED très brillante, risque de surchauffe si le courant dépasse la limite.</li>
            <li><strong>Courant trop fort :</strong> LED grillée, devient sombre ou arrête de fonctionner.</li>
        </ul>
    </div>


    </div>

    <script>
    const voltageInput = document.getElementById('inputVoltage');
    const resistanceInput = document.getElementById('inputResistance');

    const led = document.getElementById('led');
    const currentDisplay = document.getElementById('currentDisplay');
    const batteryLabel = document.getElementById('batteryLabel');
    const resistorLabel = document.getElementById('resistorLabel');

    const ring1 = document.getElementById('ring1');
    const ring2 = document.getElementById('ring2');
    const ring3 = document.getElementById('ring3');
    const ring4 = document.getElementById('ring4');

    const colorMap = ["black","brown","red","orange","yellow","green","blue","violet","grey","white"];

    function updateResistorColors(R) {
        if(R < 1) R = 1;
        let digits = R.toString();
        if(digits.length < 3) digits = digits.padStart(3, '0');

        const d1 = parseInt(digits[0]);
        const d2 = parseInt(digits[1]);
        const multiplier = digits.length - 2;

        ring1.setAttribute("fill", colorMap[d1] || "black");
        ring2.setAttribute("fill", colorMap[d2] || "black");
        ring3.setAttribute("fill", colorMap[multiplier] || "black");
        ring4.setAttribute("fill", "gold"); // tolérance fixe
    }

    function updateLED() {
        const V = parseFloat(voltageInput.value);
        let R = parseFloat(resistanceInput.value);

        if(R <= 0) R = 1;

        const I = V / R; // courant en A
        const mA = (I * 1000).toFixed(1);
        currentDisplay.innerText = `Courant: ${mA} mA`;

        // LED verte graduelle
        const maxCurrent = 0.04; 
        const brightness = Math.min(Math.sqrt(I / maxCurrent), 1);
        const green = Math.floor(255 * brightness);
        led.setAttribute("fill", `rgb(0,${green},0)`);

        // Mettre à jour valeur batterie et résistance
        batteryLabel.textContent = `Batterie V=${V}V`;
        resistorLabel.textContent = `R=${R}Ω`;

        // Mettre à jour anneaux de la résistance
        updateResistorColors(R);
    }

    voltageInput.addEventListener('input', updateLED);
    resistanceInput.addEventListener('input', updateLED);
    updateLED();
    </script>
</section>


<script>
function updateLED() {
    const V = parseFloat(document.getElementById("inputVoltage").value);
    const R = parseFloat(document.getElementById("inputResistance").value);
    const led = document.getElementById("led");
    const display = document.getElementById("currentDisplay");

    const Vf = 2; // tension seuil LED
    const Imax = 0.02; // 20 mA

    let I = (V - Vf) / R;
    if(I < 0) I = 0;

    display.innerText = `Courant: ${(I*1000).toFixed(1)} mA`;

    if(I <= 0){
        led.style.background = "#000";
        led.style.boxShadow = "inset -2px -2px 5px #111";
    } else {
        const intensity = Math.min(I / Imax, 1);
        const greenValue = Math.floor(50 + 205 * intensity);
        led.style.background = `radial-gradient(circle at center, rgb(0, ${greenValue}, 0) 0%, #003300 70%)`;
        led.style.boxShadow = `0 0 ${10 + 20*intensity}px rgb(0, ${greenValue}, 0),
                               0 0 ${30 + 20*intensity}px rgba(0, ${greenValue}, 0, 0.5),
                               inset -2px -2px 5px #004400`;
    }
}

// Mettre à jour la LED dès qu’on change les valeurs
document.getElementById("inputVoltage").addEventListener("input", updateLED);
document.getElementById("inputResistance").addEventListener("input", updateLED);

// Initialiser
updateLED();
</script>





<section id="voltage-divider" > 
    <h2 style="text-align: left;">Simulateur d'un pont diviseur de tension</h2>
    <p>Entrez la tension d’entrée et les valeurs des résistances :</p>

    <div class="simulator" style="display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%;">

        <div class="controls" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; width: 100%;">
            <label style="display: flex; flex-direction: column; align-items: center; flex: 1 1 100px;">
                Tension d'entrée (Ve)
                <input type="number" id="Vin" value="10" step="0.1" style="width: 80%; text-align: center; padding: 5px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc;">
            </label>
            <label style="display: flex; flex-direction: column; align-items: center; flex: 1 1 100px;">
                R1 (Ω)
                <input type="number" id="R1" value="1000" step="10" style="width: 80%; text-align: center; padding: 5px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc;">
            </label>
            <label style="display: flex; flex-direction: column; align-items: center; flex: 1 1 100px;">
                R2 (Ω)
                <input type="number" id="R2" value="1000" step="10" style="width: 80%; text-align: center; padding: 5px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc;">
            </label>
        </div>

        <svg viewBox="0 0 600 250" style="width: 95%; height: auto; background-color: #555555; border: 1px solid #ccc; border-radius: 8px; padding: 10px; box-sizing: border-box;">
            <defs>
                <pattern id="resistorPattern" width="10" height="10" patternUnits="userSpaceOnUse">
                    <rect width="5" height="10" fill="#f5f5f5"/>
                    <rect x="5" width="5" height="10" fill="#ddd"/>
                </pattern>
            </defs>

            <!-- Entrée Vin -->
            <line x1="50" y1="20" x2="150" y2="20" stroke="#000" stroke-width="4" stroke-linecap="round"/>
            <text id="VinLabel" x="25" y="12" fill="#8B0000" font-weight="bold" font-size="14px">Ve = 10V</text>

            <!-- R1 -->
            <line x1="150" y1="20" x2="150" y2="80" stroke="#000" stroke-width="4" stroke-linecap="round"/>
            <rect id="resistorR1" class="resistor" x="140" y="50" width="20" height="40" fill="url(#resistorPattern)"/>
            <line x1="150" y1="92" x2="150" y2="150" stroke="#000" stroke-width="4" stroke-linecap="round"/>
            <text id="labelR1" x="170" y="75" fill="#000">R1 = 1000Ω</text>

            <!-- R2 -->
            <line x1="150" y1="150" x2="150" y2="220" stroke="#000" stroke-width="4" stroke-linecap="round"/>
            <rect id="resistorR2" class="resistor" x="140" y="160" width="20" height="40" fill="url(#resistorPattern)"/>
            <line x1="150" y1="220" x2="50" y2="220" stroke="#000" stroke-width="4" stroke-linecap="round"/>
            <text id="labelR2" x="170" y="185" fill="#000">R2 = 1000Ω</text>

            <line x1="50" y1="212" x2="50" y2="30" stroke="#8B0000" stroke-width="4" stroke-linecap="round"/>
            <polygon points="45,35 55,35 50,25" fill="#8B0000"/>

            <!-- Vout -->
            <line x1="150" y1="125" x2="250" y2="125" stroke="#000" stroke-width="4"/>
            <text id="VoutLabel" x="260" y="130" fill="#000" font-weight="bold" font-size="14px">Vout = 5 V</text>
        </svg>
        <text id="VoutLabel" x="260" y="155" fill="#000080" font-weight="bold" font-size="14px">
  <tspan>Vout = 5 V</tspan>
    </text>


    </div>
</section>

<script>
const VinInput = document.getElementById('Vin');
const R1Input = document.getElementById('R1');
const R2Input = document.getElementById('R2');
const VinLabel = document.getElementById('VinLabel');
const VoutLabel = document.getElementById('VoutLabel');
const labelR1 = document.getElementById('labelR1');
const labelR2 = document.getElementById('labelR2');

function updateDivider() {
    let Vin = parseFloat(VinInput.value);
    let R1 = parseFloat(R1Input.value);
    let R2 = parseFloat(R2Input.value);

    if(R1 <=0 ) R1 = 1;
    if(R2 <=0 ) R2 = 1;

    const Vout = Vin * (R2 / (R1 + R2));
    VoutLabel.textContent = `Vout = ${Vout.toFixed(2)} V`;;

    labelR1.textContent = `R1 = ${R1} Ω`;
    labelR2.textContent = `R2 = ${R2} Ω`;
    VinLabel.textContent = `Ve = ${Vin} V`;

    // Couleur dynamique subtile sur blanc
    const blue = Math.min(255, Math.floor(200 * Vout / Vin));
    VoutLabel.setAttribute("fill", `rgb(0,0,${blue})`);
}

VinInput.addEventListener('input', updateDivider);
R1Input.addEventListener('input', updateDivider);
R2Input.addEventListener('input', updateDivider);

updateDivider();
</script>


<section id="resistance-game">
    <h2>Mini-jeu : Trouve la bonne valeur de résistance</h2>
    <p>Devinez la résistance pour atteindre 10 mA avec une tension de 5 V :</p>
    <label>Résistance (Ω) : <input type="number" id="guessResistor" step="1"></label><br>
    <button onclick="checkResistance()">Vérifier</button>
    <p id="gameResult"></p>
</section>

<script>
    // --- Loi d'Ohm ---
    function calculateOhm() {
        let V = parseFloat(document.getElementById("voltage").value);
        let I = parseFloat(document.getElementById("current").value);
        let R = parseFloat(document.getElementById("resistance").value);
        let result = "";

        if (!isNaN(V) && !isNaN(I) && isNaN(R)) {
            R = V / I;
            result = `Résistance = ${R.toFixed(2)} Ω`;
        } else if (!isNaN(V) && !isNaN(R) && isNaN(I)) {
            I = V / R;
            result = `Courant = ${I.toFixed(3)} A`;
        } else if (!isNaN(I) && !isNaN(R) && isNaN(V)) {
            V = I * R;
            result = `Tension = ${V.toFixed(2)} V`;
        } else {
            result = "Entrez exactement deux valeurs pour calculer la troisième.";
        }

        document.getElementById("ohmResult").innerText = result;
    }

    // --- Simulateur LED ---
    function simulateLED() {
        const V = parseFloat(document.getElementById("ledVoltage").value);
        const R = parseFloat(document.getElementById("ledResistor").value);
        const led = document.getElementById("led");

        const Vf = 2; // tension seuil LED
        const IfMax = 0.02; // courant max 20 mA

        const I = (V - Vf) / R;

        if (I <= 0) {
            // LED éteinte
            led.style.background = "#000";
            led.style.boxShadow = "inset 0 0 5px #001100";
        } else if (I <= IfMax) {
            // LED allumée avec dégradé radial
            const intensity = Math.min(I / IfMax, 1);

            // Couleurs du dégradé : centre clair, bord foncé
            const centerGreen = Math.floor(150 + 105 * intensity); // 150 → 255
            const edgeGreen = Math.floor(30 + 70 * intensity);      // 30 → 100

            led.style.background = `radial-gradient(circle at center, rgb(0, ${centerGreen}, 0) 0%, rgb(0, ${edgeGreen}, 0) 70%)`;
            led.style.boxShadow = `0 0 ${10 + 20 * intensity}px rgb(0, ${centerGreen}, 0),
                                   0 0 ${30 + 20 * intensity}px rgba(0, ${centerGreen}, 0, 0.5)`;
        } else {
            // LED surchargée
            led.style.background = "rgb(0, 100, 0)";
            led.style.boxShadow = "0 0 20px rgb(0, 100, 0)";
            result = "Vous avez surchargée la LED, votre rapport U/R est trop élevé, la LED à donc grillée.";
        }
        document.getElementById("ledResult").innerText = result;
    }

    // --- Diviseur de tension ---
    function simulateVoltageDivider() {
        const Vin = parseFloat(document.getElementById("vdInput").value);
        const R1 = parseFloat(document.getElementById("vdR1").value);
        const R2 = parseFloat(document.getElementById("vdR2").value);

        if (R1 > 0 && R2 > 0) {
            const Vout = Vin * (R2 / (R1 + R2));
            document.getElementById("vdResult").innerText = `Tension de sortie = ${Vout.toFixed(2)} V`;
        } else {
            document.getElementById("vdResult").innerText = "Entrez des valeurs de résistance valides.";
        }
    }

    // --- Mini-jeu résistance ---
    function checkResistance() {
        const guess = parseFloat(document.getElementById("guessResistor").value);
        const targetR = 5 / 0.01; // R = V/I = 5V / 10mA = 500 Ω

        let result = "";
        if (guess === targetR) {
            result = "Bravo ! Vous avez trouvé la bonne résistance !";
        } else if (guess < targetR) {
            result = "Trop faible, essayez une valeur plus grande.";
        } else {
            result = "Trop élevée, essayez une valeur plus petite.";
        }

        document.getElementById("gameResult").innerText = result;
    }
</script>

</body>
</html>
